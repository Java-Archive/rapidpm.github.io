<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="shortcut icon" href="../../assets/ico/favicon.ico">

    <title>RapidPM - Blog</title>

    <!-- Bootstrap-CSS -->
    <link href="http://rapidpm.github.io/site/css/bootstrap.min.css" rel="stylesheet">

    <!-- Besondere Stile für diese Vorlage -->
    <link href="http://rapidpm.github.io/site/css/blog.css" rel="stylesheet">

    <!-- Nur für Testzwecke. Kopiere diese Zeile nicht in echte Projekte! -->
    <!--[if lt IE 9]>
    <script src="http://rapidpm.github.io/site/js/ie8-responsive-file-warning.js"></script><![endif]-->

    <!-- Unterstützung für Media Queries und HTML5-Elemente im Internet Explorer über HTML5 shim und Respond.js -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->


    <!-- Include required JS files -->
    <script type="text/javascript" src="http://rapidpm.github.io/site/syntax/shCore.js"></script>
    <script type="text/javascript" src="http://rapidpm.github.io/site/syntax/shBrushJava.js"></script>
    <script type="text/javascript" src="http://rapidpm.github.io/site/syntax/shBrushJavaFX.js"></script>
    <script type="text/javascript" src="http://rapidpm.github.io/site/syntax/shBrushSql.js"></script>
    <script type="text/javascript" src="http://rapidpm.github.io/site/syntax/shBrushJScript.js"></script>
    <script type="text/javascript" src="http://rapidpm.github.io/site/syntax/shBrushXml.js"></script>

    <!-- Include *at least* the core style and default theme -->
    <link href="http://rapidpm.github.io/site/syntax/shCore.css" rel="stylesheet" type="text/css" />
    <link href="http://rapidpm.github.io/site/syntax/shThemeDefault.css" rel="stylesheet" type="text/css" />

    <!-- Custom styles for this template -->
    <link href="http://rapidpm.github.io/site/css/carousel.css" rel="stylesheet">

    <!-- Google Analytics -->
    <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-35462441-1', 'auto');
    ga('send', 'pageview');

    </script>
    <!-- End Google Analytics -->
</head>

<body>

<!-- NAVBAR
================================================== -->
<div class="navbar-wrapper">
    <div class="container">

        <div class="navbar navbar-inverse navbar-static-top" role="navigation">
            <div class="container">
                <div class="navbar-header">
                    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    <a class="navbar-brand" href="http://www.rapidpm.org">RapidPM</a>
                </div>
                <div class="navbar-collapse collapse">
                    <ul class="nav navbar-nav">
                        <li><a href="/conferences/index.html">Conferences/Talks</a></li>
                        <li><a href="/publications/index.html">Publications</a></li>
                        <li><a href="/license/index.html">License</a></li>
                        <li><a href="/releases/index.html">Releases</a></li>
                        <li><a href="/contact/index.html">Contact</a></li>
                        <li><a href="/impressum/index.html">Impressum</a></li>
                        <!--
                        <li class="dropdown">
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown">Team<b class="caret"></b></a>
                            <ul class="dropdown-menu">
                                <li><a href="#">Sven Ruppert</a></li>
                                <li><a href="#">Marco Ebbinghaus</a></li>
                                <li><a href="#">Alexander Bischof</a></li>
                                <li class="divider"></li>
                                <li class="dropdown-header">Nav header</li>
                                <li><a href="#">Separated link</a></li>
                                <li><a href="#">One more separated link</a></li>
                            </ul>
                        </li>
                        -->
                    </ul>
                </div>
            </div>
        </div>

    </div>
</div>

<div class="container">
    <div class="blog-header">
        <h1 class="blog-title"><br/>The RapidPM Blog</h1>
        <p class="lead blog-description">
             We are coding Java, because it is a great pleasure for us.
        </p>
    </div>

    <div class="row">

        <div class="col-sm-8 blog-main">
<div class="blog-post">
<h2 class="blog-post-title"><a href=/2014/11/10/angularjs-directives-put-to-use-part-1.html>AngularJS directives put to use - Part 1</a></h2>
<p class="blog-post-meta">2014-11-10 from <a href="/team/oliver-milke/">Oliver Milke</a></p>
<h2>Introduction</h2>
<p><a href="https://angularjs.org/">AngularJS</a> is a JavaScript framework that greatly assists in building rich client-side web applications. It pushes techniques
well known among backend developers to the frontend, for instance dependency injection (DI) or expression binding (more precisely two-way-binding).</p>

<p>Another truly helpful element of AngularJS are <a href="https://docs.angularjs.org/guide/directive">directives</a>. You can think of directives as your own means of extending HTML. Or consider it as a means
to reduce repetitive code in HTML and therefore making it more readable and improving maintainability.</p>

<p>This blog entry assumes a basic knowledge of AngularJS' controller concept and how to bind to bind a value of the controller with {{}}.</p>

<h2>A Nav-Bar with Bootstrap</h2>

<h3>Initial Situation</h3>
<p>For a little app I currently develop, I copied the basic nav bar example from the Bootstrap example and extended it with a some behaviour:</p>

<pre brush="html">
&lt;li class="dropdown" ng-class="{
    active: isActive('/categories') || isActive('/fortune') ||
    isActive('/entry-report') || isActive('/savings') || isActive('/audit')
    }"&gt;

    &lt;a href="#" class="dropdown-toggle" data-toggle="dropdown"&gt;
        &lt;span class="glyphicon glyphicon-stats"&gt;&lt;/span&gt; Reports &lt;b class="caret"&gt;&lt;/b&gt;
    &lt;/a&gt;
    &lt;ul class="dropdown-menu"&gt;
        &lt;li ng-class="{active: isActive('/categories')}"&gt;
            &lt;a href="#/categories"&gt;Categories&lt;/a&gt;
        &lt;/li&gt;

        &lt;li ng-class="{active: isActive('/entry-report')}"&gt;
            &lt;a href="#/entry-report"&gt;Entries&lt;/a&gt;
        &lt;/li&gt;

        &lt;li ng-class="{active: isActive('/savings')}"&gt;
            &lt;a href="#/savings"&gt;Savings&lt;/a&gt;
        &lt;/li&gt;

        &lt;li ng-class="{active: isActive('/fortune')}"&gt;
            &lt;a href="#/fortune"&gt;Fortune&lt;/a&gt;
        &lt;/li&gt;

        &lt;li ng-class="{active: isActive('/audit')}"&gt;
            &lt;a href="#/audit"&gt;Audit&lt;/a&gt;
        &lt;/li&gt;

    &lt;/ul&gt;
&lt;/li&gt;
</pre>
<p><code>ng-class</code> is used to add a CSS classes to the element if the specified condition is met. <code>isActive</code> is a method of the corresponding
AngularJS controller, which simply returns <code>true</code> if the currently active URI of the application ends with the provided string. This way an item is
highlighted if the respective link is displayed.</p>

<p>As you can see, there is some repetition if you want to add another entry to the nav bar. You always have to specify the URI for <code>isActive</code> and the
<code>href</code> attribute. Additionally every nav bar entry mostly looks the same, except for the URI and the title of the link.</p>

<p>There is a better way: an AngularJS directive helps us to remove the repetition with both of the above mentioned problems.</p>

<h3>The solution</h3>

<p>We create a directive:</p>

<pre brush="javascript">
var myDirectives = angular.module('myApp.directives', []);

myDirectives.directive('navEntry', ['$location', function ($location) {

    function link(scope, element, attrs) {

        function setSafeLink(element) {

            var link = element.find('a');
            link.attr('href', '#' + attrs.path);
        }

        setSafeLink(element);

        scope.$watch(function () {
            return $location.path();
        }, function (newLocation) {

            if (attrs.path === newLocation) {
                element.addClass('active');
            } else {
                element.removeClass('active');
            }
        });
    }

    return {
        replace: true,
        restrict: 'E',
        scope: {
            path: '@',
            title: '@'
        },
        templateUrl: '/js/directives/navEntry/nav-entry.html',
        link: link
    };


}]);
</pre>

<figure style="float: right; margin: 5px 0 5px 15px; text-align: center">
    <img src="http://www.rapidpm.org/2014/11/10/folderStructure.png" >
    <figcaption>Folder Structure</figcaption>
</figure>

<p>This is the template, that the directives links to:</p>

<pre brush="html">
&lt;li&gt;
    &lt;a &gt;{{title}}&lt;/a&gt;
&lt;/li&gt;
</pre>

<p>Here are the core explanations</p>

<ul>
    <li>the name of the directive is <code>navEntry</code>, which means it can be used as <code>&lt;nav-entry&gt;</code> in the HTML. This is Angulars standard way of using directives.</li>
    <li>we depend on <code>$location</code> being injected (for checking which URI is currently active)</li>
    <li>the function <code>link(scope, element, attrs)</code> is executed once for each actual usage (instance) of the directive</li>
     <ul>
         <li>the link of our navigation entry is set with <code>setSafeLink()</code> to the value of the path attribute and the title of the title attribute of the directive instance</li>
         <li>a listener, which triggers when the URI changes, is registered</li>
         <li>if the URI changes, we check whether the currently active URI matches the path attribute of the directive instance (which governs whether or not the navigation entry is active)</li>
     </ul>
    <li><code>restrict: 'E'</code>: the directive is used like a separate element</li>
    <li><code>templateUrl</code>: the path of content of the directive</li>
    <li><code>scope</code>:</li>
        <ul>
            <li>this defines an own scope for each directive instance, isolated from the scope of the controller actually being responsible (isolate scope)</li>
            <li>path: '@' the directive element shall have an attribute path, which value is mapped to the scope property path <code>(&lt;nav-bar path="/mypath"&gt;)</code></li>
            <li>shorthand notation for <code>path: '@path'</code></li>
        </ul>
    <li><code>replace: true</code>: means that the directive usage in the HTML is replaced by content of the template of the
        directive when building the final DOM</li>
</ul>

<p>Actually I wanted to set the <code>href</code> attribute in the template, but AngularJS has some security mechanism that prevents us from using something like</p>

<pre brush="html">
    &lt;a href="#{{path}}"&gt;...&lt;/a&gt;
</pre>

<p>That's why setSafeLink() adds href instead.</p>

<h3>The Result</h3>
        
<pre brush="html">
&lt;li class="dropdown" ng-class="{
    active: isActive('/categories') || isActive('/fortune') ||
    isActive('/entry-report') || isActive('/savings') || isActive('/audit')
    }"&gt;

    &lt;a href="#" class="dropdown-toggle" data-toggle="dropdown"&gt;
        &lt;span class="glyphicon glyphicon-stats"&gt;&lt;/span&gt; Reports &lt;b class="caret"&gt;&lt;/b&gt;
    &lt;/a&gt;
    &lt;ul class="dropdown-menu"&gt;

        &lt;nav-entry path="/categories" title="Category Overview"&gt;&lt;/nav-entry&gt;

        &lt;nav-entry path="/category" title="Category"&gt;&lt;/nav-entry&gt;

        &lt;nav-entry path="/entry-report" title="Entries"&gt;&lt;/nav-entry&gt;

        &lt;nav-entry path="/savings" title="Savings"&gt;&lt;/nav-entry&gt;

        &lt;nav-entry path="/fortune" title="Fortune"&gt;&lt;/nav-entry&gt;

        &lt;nav-entry path="/audit" title="Balance Audit"&gt;&lt;/nav-entry&gt;

    &lt;/ul&gt;
&lt;/li&gt;
</pre>

<h2>Conclusion</h2>

<p>This is a lot less code than in the initial setup and adding a new navigation entry is pretty easy now. We removed the duplication of the URI string, which is a
little less error prone. Moreover, we now could the change the template in one place instead of touching all navigation entries, which makes it DRY.</p>

<p>The idea could even be taken a little further. A potential next step is to make the whole dropdown element a separate directive, which could lift the need to
separately list each <code>isActive('/...') </code> branch for the contained &lt;nav-bar&gt;.</p>

<h2>Outlook</h2>
<p>Stay tuned for another example of what you can do with directives in part 2. Next time we'll have a look into how to format currency values.</p>
</div>            <!--
            <ul class="pager">
                <li><a href="#">Vorherige</a></li>
                <li><a href="#">Nächste</a></li>
            </ul>
            -->
        </div><!-- /.blog-main -->

        <div class="col-sm-3 col-sm-offset-1 blog-sidebar">

            <div class="sidebar-module sidebar-module-inset">
                <h4>About Us</h4>
                <p>We are a group of developers, coding Java and proud to be nerds ;-)
                </p>
            </div>

            <div class="sidebar-module">
                <h4>YourKit</h4>
                    <ol class="list-unstyled">
                        <li><img src="http://www.yourkit.com/images/yklogo.png" alt="YourKit"></li>
                        <li>YourKit supports open source projects with its full-featured Java Profiler.
                            YourKit, LLC is the creator of <a href="http://www.yourkit.com/java/profiler/index.jsp">YourKit Java Profiler</a>

                    </ol>
            </div>
            <div class="sidebar-module">
                <h4>Sponsoring</h4>
                    <ol class="list-unstyled">
                        <!--<li><a href="http://www.codecentric.de">codecentric AG</a></li>-->
                        <li><a href="http://www.intellij.com">JetBrains</a></li>
                        <li><a href="http://zeroturnaround.com/">zeroturnaround</a></li>
                        <li><a href="https://www.atlassian.com/">Atlassian</a></li>
                    </ol>
            </div>
            <div class="sidebar-module">
                <h4>We are at </h4>
                    <ol class="list-unstyled">
                        <li><a href="https://github.com/RapidPM">GitHub</a></li>
                        <li><a href="https://twitter.com/SvenRuppert">Twitter - Sven Ruppert</a></li>
                        <li><a href="https://plus.google.com/u/0/+SvenRuppert/">GooglePlus - Sven Ruppert</a></li>
                        <li><a href="https://twitter.com/A_Bischof">Twitter - Alexander Bischof</a></li>
                        <li><a href="https://plus.google.com/u/0/100135686516251171415/">GooglePlus - Alexander Bischof</a></li>
                    </ol>
            </div>
            <div class="sidebar-module">
                <h4>Archives</h4>
                <ol class="list-unstyled">
<li><a href="/2015/04">2015-04</a></li>
<li><a href="/2015/02">2015-02</a></li>
<li><a href="/2015/01">2015-01</a></li>
<li><a href="/2015/.DS_Store">2015-.DS_Store</a></li>
<li><a href="/2014/12">2014-12</a></li>
<li><a href="/2014/11">2014-11</a></li>
<li><a href="/2014/10">2014-10</a></li>
<li><a href="/2014/06">2014-06</a></li>
<li><a href="/2014/05">2014-05</a></li>
<li><a href="/2014/04">2014-04</a></li>
<li><a href="/2014/03">2014-03</a></li>
<li><a href="/2014/02">2014-02</a></li>
<li><a href="/2014/01">2014-01</a></li>
<li><a href="/2013/12">2013-12</a></li>
<li><a href="/2013/11">2013-11</a></li>
<li><a href="/2013/10">2013-10</a></li>
<li><a href="/2013/09">2013-09</a></li>
<li><a href="/2013/08">2013-08</a></li>
<li><a href="/2013/07">2013-07</a></li>
<li><a href="/2013/06">2013-06</a></li>
<li><a href="/2013/05">2013-05</a></li>
                </ol>
            </div>

        </div><!-- /.blog-sidebar -->

    </div><!-- /.row -->

</div><!-- /.container -->

<div class="blog-footer">
    <p>
        <a href="#">back to the top</a>
    </p>
</div>


<!-- Bootstrap-JavaScript
================================================== -->
<!-- Am Ende des Dokuments platziert, damit Seiten schneller laden -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
<script src="http://rapidpm.github.io/site/js/bootstrap.min.js"></script>
<script src="http://rapidpm.github.io/site/js/docs.min.js"></script>
<!-- Finally, to actually run the highlighter, you need to include this JS on your page -->
<script type="text/javascript">
    SyntaxHighlighter.all()
</script>
</body>
</html>
